# ui is created correctly

    Code
      ui
    Output
      [1] "<h1>Principal projection: activity summary by year</h1>\n<div class=\"row\">\n  <div class=\"col-sm-12\">\n    <div class=\"card bs4Dash\">\n      <div class=\"card-header\">\n        <h3 class=\"card-title\">Activity by type and year</h3>\n        <div class=\"card-tools float-right\">\n          <button class=\"btn btn-tool btn-sm\" type=\"button\" data-card-widget=\"collapse\">\n            <i class=\"fas fa-minus\" role=\"presentation\" aria-label=\"minus icon\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"card-body\">\n        <div class=\"tabbable\">\n          <ul class=\"nav nav-tabs\">\n            <li class=\"nav-item\">\n              <a href=\"\" data-toggle=\"tab\" data-value=\"Value\" class=\"nav-link active\" data-target=\"\">Value</a>\n            </li>\n            <li class=\"nav-item\">\n              <a href=\"\" data-toggle=\"tab\" data-value=\"Change\" class=\"nav-link\" data-target=\"\">Change</a>\n            </li>\n            <li class=\"nav-item\">\n              <a href=\"\" data-toggle=\"tab\" data-value=\"Percent change\" class=\"nav-link\" data-target=\"\">Percent change</a>\n            </li>\n          </ul>\n          <div class=\"tab-content\">\n            <div class=\"tab-pane active\" data-value=\"Value\" id=\"\">\n              <div class=\"shiny-spinner-output-container shiny-spinner-hideui \">\n                <div class=\"load-container shiny-spinner-hidden load1\">\n                  <div id=\"spinner-8eb13199b7071223f1b6862325ec4f49\" class=\"loader\">Loading...</div>\n                </div>\n                <div style=\"height:400px\" class=\"shiny-spinner-placeholder\"></div>\n                <div id=\"id-activity_value\" class=\"shiny-html-output\"></div>\n              </div>\n            </div>\n            <div class=\"tab-pane\" data-value=\"Change\" id=\"\">\n              <div class=\"shiny-spinner-output-container shiny-spinner-hideui \">\n                <div class=\"load-container shiny-spinner-hidden load1\">\n                  <div id=\"spinner-4efe8c95a370c47646c61ff22db1ad7e\" class=\"loader\">Loading...</div>\n                </div>\n                <div style=\"height:400px\" class=\"shiny-spinner-placeholder\"></div>\n                <div id=\"id-activity_change\" class=\"shiny-html-output\"></div>\n              </div>\n            </div>\n            <div class=\"tab-pane\" data-value=\"Percent change\" id=\"\">\n              <div class=\"shiny-spinner-output-container shiny-spinner-hideui \">\n                <div class=\"load-container shiny-spinner-hidden load1\">\n                  <div id=\"spinner-78b9470659f848acd249e9699daa7bfe\" class=\"loader\">Loading...</div>\n                </div>\n                <div style=\"height:400px\" class=\"shiny-spinner-placeholder\"></div>\n                <div id=\"id-activity_change_pcnt\" class=\"shiny-html-output\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <script type=\"application/json\">{\"title\":\"Activity by type and year\",\"solidHeader\":true,\"width\":12,\"collapsible\":true,\"closable\":false,\"maximizable\":false,\"gradient\":false}</script>\n  </div>\n</div>\n<div class=\"row\">\n  <div class=\"col-sm-4\">\n    <div class=\"card bs4Dash\">\n      <div class=\"card-header\">\n        <h3 class=\"card-title\">A&amp;E Attendances</h3>\n        <div class=\"card-tools float-right\">\n          <button class=\"btn btn-tool btn-sm\" type=\"button\" data-card-widget=\"collapse\">\n            <i class=\"fas fa-minus\" role=\"presentation\" aria-label=\"minus icon\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"card-body\">\n        <div class=\"shiny-spinner-output-container shiny-spinner-hideui \">\n          <div class=\"load-container shiny-spinner-hidden load1\">\n            <div id=\"spinner-bd1739af4ba8a7c2ddd0e870555cffaf\" class=\"loader\">Loading...</div>\n          </div>\n          <div class=\"plotly html-widget html-widget-output shiny-report-size shiny-report-theme html-fill-item\" id=\"id-aae\" style=\"width:100%;height:400px;\"></div>\n        </div>\n      </div>\n    </div>\n    <script type=\"application/json\">{\"title\":\"A&amp;E Attendances\",\"solidHeader\":true,\"width\":4,\"collapsible\":true,\"closable\":false,\"maximizable\":false,\"gradient\":false}</script>\n  </div>\n  <div class=\"col-sm-4\">\n    <div class=\"card bs4Dash\">\n      <div class=\"card-header\">\n        <h3 class=\"card-title\">Inpatient Admissions</h3>\n        <div class=\"card-tools float-right\">\n          <button class=\"btn btn-tool btn-sm\" type=\"button\" data-card-widget=\"collapse\">\n            <i class=\"fas fa-minus\" role=\"presentation\" aria-label=\"minus icon\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"card-body\">\n        <div class=\"shiny-spinner-output-container shiny-spinner-hideui \">\n          <div class=\"load-container shiny-spinner-hidden load1\">\n            <div id=\"spinner-62d2bb708a13ffffed18adb3ebdc38bf\" class=\"loader\">Loading...</div>\n          </div>\n          <div class=\"plotly html-widget html-widget-output shiny-report-size shiny-report-theme html-fill-item\" id=\"id-ip\" style=\"width:100%;height:400px;\"></div>\n        </div>\n      </div>\n    </div>\n    <script type=\"application/json\">{\"title\":\"Inpatient Admissions\",\"solidHeader\":true,\"width\":4,\"collapsible\":true,\"closable\":false,\"maximizable\":false,\"gradient\":false}</script>\n  </div>\n  <div class=\"col-sm-4\">\n    <div class=\"card bs4Dash\">\n      <div class=\"card-header\">\n        <h3 class=\"card-title\">Outpatient Attendances</h3>\n        <div class=\"card-tools float-right\">\n          <button class=\"btn btn-tool btn-sm\" type=\"button\" data-card-widget=\"collapse\">\n            <i class=\"fas fa-minus\" role=\"presentation\" aria-label=\"minus icon\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"card-body\">\n        <div class=\"shiny-spinner-output-container shiny-spinner-hideui \">\n          <div class=\"load-container shiny-spinner-hidden load1\">\n            <div id=\"spinner-5085a87f5108c8e0a66d6542d7350959\" class=\"loader\">Loading...</div>\n          </div>\n          <div class=\"plotly html-widget html-widget-output shiny-report-size shiny-report-theme html-fill-item\" id=\"id-op\" style=\"width:100%;height:400px;\"></div>\n        </div>\n      </div>\n    </div>\n    <script type=\"application/json\">{\"title\":\"Outpatient Attendances\",\"solidHeader\":true,\"width\":4,\"collapsible\":true,\"closable\":false,\"maximizable\":false,\"gradient\":false}</script>\n  </div>\n</div>"

# mod_principal_high_level_table returns a gt

    Code
      gt::as_raw_html(table)
    Output
      <div id="ydgabwknrs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
        
        <table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false" style="-webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #FFFFFF; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 3px; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3;" bgcolor="#FFFFFF">
        <thead style="border-style: none;">
          <tr class="gt_col_headings" style="border-style: none; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #000000; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3;">
            <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Point of Delivery" style="border-style: none; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; text-align: left;" bgcolor="#FFFFFF" valign="bottom" align="left">Point of Delivery</th>
            <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="2018/19" style="border-style: none; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" bgcolor="#FFFFFF" valign="bottom" align="right">2018/19</th>
            <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="2020/21" style="border-style: none; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" bgcolor="#FFFFFF" valign="bottom" align="right">2020/21</th>
          </tr>
        </thead>
        <tbody class="gt_table_body" style="border-style: none; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3;">
          <tr style="border-style: none;"><td headers="pod_name" class="gt_row gt_left" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;" valign="middle" align="left">A&amp;E Attendance</td>
      <td headers="2018/19" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">135,000</td>
      <td headers="2020/21" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">137,000</td></tr>
          <tr style="border-style: none;"><td headers="pod_name" class="gt_row gt_left" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;" valign="middle" align="left">Elective Admission</td>
      <td headers="2018/19" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">8,800</td>
      <td headers="2020/21" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">10,700</td></tr>
          <tr style="border-style: none;"><td headers="pod_name" class="gt_row gt_left" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;" valign="middle" align="left">Daycase Admission</td>
      <td headers="2018/19" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">58,000</td>
      <td headers="2020/21" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">74,000</td></tr>
          <tr style="border-style: none;"><td headers="pod_name" class="gt_row gt_left" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;" valign="middle" align="left">Maternity Admission</td>
      <td headers="2018/19" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">1,100</td>
      <td headers="2020/21" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">1,200</td></tr>
          <tr style="border-style: none;"><td headers="pod_name" class="gt_row gt_left" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;" valign="middle" align="left">Non-Elective Admission</td>
      <td headers="2018/19" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">60,000</td>
      <td headers="2020/21" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">70,000</td></tr>
          <tr style="border-style: none;"><td headers="pod_name" class="gt_row gt_left" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;" valign="middle" align="left">First Outpatient Attendance</td>
      <td headers="2018/19" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">140,000</td>
      <td headers="2020/21" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">150,000</td></tr>
          <tr style="border-style: none;"><td headers="pod_name" class="gt_row gt_left" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;" valign="middle" align="left">Follow-up Outpatient Attendance</td>
      <td headers="2018/19" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">370,000</td>
      <td headers="2020/21" class="gt_row gt_right" style="border-style: none; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;" valign="middle" align="right">390,000</td></tr>
        </tbody>
        
        
      </table>
      </div>

